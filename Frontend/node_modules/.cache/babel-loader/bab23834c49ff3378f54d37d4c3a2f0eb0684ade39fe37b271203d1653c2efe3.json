{"ast":null,"code":"var _jsxFileName = \"/Users/hussamkhan/Desktop/AI-Travel-App/Frontend/src/LoadMap.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport mapboxgl from 'mapbox-gl'; // Import Mapbox GL\nimport './Styles/LoadMap.css';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction LoadMap() {\n  _s();\n  const containerRef = useRef(null); // Ref for the map container\n  const [location, setLocation] = useState('');\n  const [centre, setCentre] = useState({\n    lat: 51.5074456,\n    lng: -0.1277653\n  }); // Default location (London)\n  const [map, setMap] = useState(null);\n  mapboxgl.accessToken = process.env.REACT_APP_MAPBOX_API_KEY; // Use your Mapbox access token\n\n  // Initialize the Mapbox map\n  const initializeMap = () => {\n    const mapInstance = new mapboxgl.Map({\n      container: containerRef.current,\n      // The DOM element for the map\n      style: 'mapbox://styles/mapbox/streets-v11',\n      // Map style\n      center: [centre.lng, centre.lat],\n      // Set the center to the default coordinates\n      zoom: 12 // Default zoom level\n    });\n\n    // Add navigation controls (zoom and rotation)\n    mapInstance.addControl(new mapboxgl.NavigationControl(), 'top-left');\n    setMap(mapInstance); // Save the map instance in state for later use\n  };\n  useEffect(() => {\n    if (!map) {\n      initializeMap();\n    } else {\n      map.setCenter([centre.lng, centre.lat]);\n    }\n  }, [centre, map]); // Re-run this when the center changes or map is null\n\n  // Handle location search\n  const handleLocationSearch = e => {\n    setLocation(e.target.value);\n  };\n  const submitLocation = async e => {\n    e.preventDefault();\n\n    // Use Mapbox geocoding API to search for the location\n    const geocodeURL = `https://api.mapbox.com/geocoding/v5/mapbox.places/${location}.json?access_token=${mapboxgl.accessToken}`;\n    try {\n      const response = await axios.get(geocodeURL);\n      const coords = response.data.features[0].geometry.coordinates;\n      setCentre({\n        lat: coords[1],\n        lng: coords[0]\n      });\n    } catch (error) {\n      alert('Location not found.');\n      console.error(error);\n    }\n  };\n\n  // Fetch wheelchair accessible places from an API\n  const fetchWheelchairAccessiblePlaces = async (lat, lon) => {\n    try {\n      const response = await axios.get(`https://wheelmap.org/api/nodes?lat=${lat}&lon=${lon}&distance=1000&wheelchair=yes`, {\n        headers: {\n          'Accept': 'application/json'\n        }\n      });\n      const wheelchairAccessibleMarkers = response.data.nodes.map(place => ({\n        lat: place.lat,\n        lng: place.lon,\n        name: place.name,\n        wheelchair: place.wheelchair\n      }));\n      console.log(\"WheelMap Markers: \", wheelchairAccessibleMarkers);\n      return wheelchairAccessibleMarkers;\n    } catch (error) {\n      console.error(\"Error fetching wheelchair accessible places:\", error);\n      return [];\n    }\n  };\n\n  // Add markers to the map\n  const addMarkers = places => {\n    places.forEach(place => {\n      new mapboxgl.Marker().setLngLat([place.lng, place.lat]) // Set marker position\n      .setPopup(new mapboxgl.Popup().setHTML(`<h3>${place.name}</h3><p>Accessible: ${place.wheelchair}</p>`)).addTo(map); // Add the marker to the map\n    });\n  };\n  const submitForm = async e => {\n    e.preventDefault();\n\n    // Fetch wheelchair accessible places and add them as markers on the map\n    const wheelchairMarkers = await fetchWheelchairAccessiblePlaces(centre.lat, centre.lng);\n    addMarkers(wheelchairMarkers);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Find Activities\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: submitForm,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"location\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Location:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          placeholder: \"Enter your Location\",\n          value: location,\n          onChange: handleLocationSearch,\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"submit-button\",\n          type: \"submit\",\n          children: \"Search\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      ref: containerRef // Attach the ref to the map container\n      ,\n      style: {\n        height: '650px',\n        width: '100%'\n      } // Map container style\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 98,\n    columnNumber: 5\n  }, this);\n}\n_s(LoadMap, \"NNCVurCu9R9sA9roguxo9/PiE8s=\");\n_c = LoadMap;\nexport default LoadMap;\nvar _c;\n$RefreshReg$(_c, \"LoadMap\");","map":{"version":3,"names":["React","useState","useEffect","useRef","mapboxgl","axios","jsxDEV","_jsxDEV","LoadMap","_s","containerRef","location","setLocation","centre","setCentre","lat","lng","map","setMap","accessToken","process","env","REACT_APP_MAPBOX_API_KEY","initializeMap","mapInstance","Map","container","current","style","center","zoom","addControl","NavigationControl","setCenter","handleLocationSearch","e","target","value","submitLocation","preventDefault","geocodeURL","response","get","coords","data","features","geometry","coordinates","error","alert","console","fetchWheelchairAccessiblePlaces","lon","headers","wheelchairAccessibleMarkers","nodes","place","name","wheelchair","log","addMarkers","places","forEach","Marker","setLngLat","setPopup","Popup","setHTML","addTo","submitForm","wheelchairMarkers","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","type","placeholder","onChange","required","ref","height","width","_c","$RefreshReg$"],"sources":["/Users/hussamkhan/Desktop/AI-Travel-App/Frontend/src/LoadMap.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport mapboxgl from 'mapbox-gl';  // Import Mapbox GL\nimport './Styles/LoadMap.css';\nimport axios from 'axios';\n\nfunction LoadMap() {\n  const containerRef = useRef(null);  // Ref for the map container\n  const [location, setLocation] = useState('');\n  const [centre, setCentre] = useState({ lat: 51.5074456, lng: -0.1277653 });  // Default location (London)\n  const [map, setMap] = useState(null);\n\n  mapboxgl.accessToken = process.env.REACT_APP_MAPBOX_API_KEY;  // Use your Mapbox access token\n\n  // Initialize the Mapbox map\n  const initializeMap = () => {\n    const mapInstance = new mapboxgl.Map({\n      container: containerRef.current,  // The DOM element for the map\n      style: 'mapbox://styles/mapbox/streets-v11',  // Map style\n      center: [centre.lng, centre.lat],  // Set the center to the default coordinates\n      zoom: 12  // Default zoom level\n    });\n\n    // Add navigation controls (zoom and rotation)\n    mapInstance.addControl(new mapboxgl.NavigationControl(), 'top-left');\n    setMap(mapInstance);  // Save the map instance in state for later use\n  };\n\n  useEffect(() => {\n    if (!map) {\n      initializeMap();\n    } else {\n      map.setCenter([centre.lng, centre.lat]);\n    }\n  }, [centre, map]);  // Re-run this when the center changes or map is null\n\n  // Handle location search\n  const handleLocationSearch = (e) => {\n    setLocation(e.target.value);\n  };\n\n  const submitLocation = async (e) => {\n    e.preventDefault();\n\n    // Use Mapbox geocoding API to search for the location\n    const geocodeURL = `https://api.mapbox.com/geocoding/v5/mapbox.places/${location}.json?access_token=${mapboxgl.accessToken}`;\n    try {\n      const response = await axios.get(geocodeURL);\n      const coords = response.data.features[0].geometry.coordinates;\n      setCentre({ lat: coords[1], lng: coords[0] });\n    } catch (error) {\n      alert('Location not found.');\n      console.error(error);\n    }\n  };\n\n  // Fetch wheelchair accessible places from an API\n  const fetchWheelchairAccessiblePlaces = async (lat, lon) => {\n    try {\n      const response = await axios.get(`https://wheelmap.org/api/nodes?lat=${lat}&lon=${lon}&distance=1000&wheelchair=yes`, {\n        headers: {\n          'Accept': 'application/json',\n        }\n      });\n\n      const wheelchairAccessibleMarkers = response.data.nodes.map(place => ({\n        lat: place.lat,\n        lng: place.lon,\n        name: place.name,\n        wheelchair: place.wheelchair,\n      }));\n      console.log(\"WheelMap Markers: \", wheelchairAccessibleMarkers);\n      return wheelchairAccessibleMarkers;\n    } catch (error) {\n      console.error(\"Error fetching wheelchair accessible places:\", error);\n      return [];\n    }\n  };\n\n  // Add markers to the map\n  const addMarkers = (places) => {\n    places.forEach(place => {\n      new mapboxgl.Marker()\n        .setLngLat([place.lng, place.lat])  // Set marker position\n        .setPopup(new mapboxgl.Popup().setHTML(`<h3>${place.name}</h3><p>Accessible: ${place.wheelchair}</p>`))\n        .addTo(map);  // Add the marker to the map\n    });\n  };\n\n  const submitForm = async (e) => {\n    e.preventDefault();\n\n    // Fetch wheelchair accessible places and add them as markers on the map\n    const wheelchairMarkers = await fetchWheelchairAccessiblePlaces(centre.lat, centre.lng);\n    addMarkers(wheelchairMarkers);\n  };\n\n  return (\n    <div className=\"container\">\n      <h1>Find Activities</h1>\n      <form onSubmit={submitForm}>\n        <div className=\"location\">\n          <label>Location:</label>\n          <input\n            type=\"text\"\n            placeholder=\"Enter your Location\"\n            value={location}\n            onChange={handleLocationSearch}\n            required\n          />\n          <button className=\"submit-button\" type=\"submit\">Search</button>\n        </div>\n      </form>\n\n      {/* Map container */}\n      <div\n        ref={containerRef}  // Attach the ref to the map container\n        style={{ height: '650px', width: '100%' }}  // Map container style\n      ></div>\n    </div>\n  );\n}\n\nexport default LoadMap;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}